# Router è·¯ç”±åŸºç¤æ“ä½œ

## èªªæ˜
ã€Œè·¯ç”±ç³»çµ±ã€æ˜¯ `Nuxt` é‡è¦æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œæ¯å€‹åœ¨ `pages/` ç›®éŒ„ä¸‹çš„æª”æ¡ˆï¼Œéƒ½æœƒè‡ªå‹•è¢«ç”Ÿæˆåœ¨ `è·¯ç”±` ä¹‹ä¸­ä¾› URL è·¯å¾‘ä¾†é¡¯ç¤ºæª”æ¡ˆçš„å…§å®¹ï¼Œæ¯å€‹é é¢éƒ½æ˜¯é€éã€Œå‹•æ…‹ã€ä¾†è¼‰å…¥çš„ï¼Œå¯ä»¥ä½¿ç”¨æœ€å°‘çš„ç¨‹ç¢¼ä¾†å‰µå»ºè·¯ç”±ï¼Œä¸ç”¨åƒ `vue cli` é‚„è¦æ‰‹å‹•è¨­ç½®æ¯å€‹è·¯ç”±ã€‚

## Pages è¨­ç½®
æ˜¯é€é `pages/` ç›®éŒ„ï¼Œå‰µå»ºçš„æª”æ¡ˆåç¨±ï¼Œç³»çµ±å°‡æœƒè‡ªå‹•ç”Ÿæˆè·¯ç”±ã€‚

**`pages/`ç›®éŒ„è¨­ç½®:**
```text
pages/
--| about.vue
--| posts/
------| [id].vue
```

**ç³»çµ±è‡ªå‹•ç”Ÿæˆè·¯ç”±:**
```json
{
  "routes": [
    {
      "path": "/about",
      "component": "pages/about.vue"
    },
    {
      "path": "/posts/:id",
      "component": "pages/posts/[id].vue"
    }
  ]
}
```

## Navigation å°èˆª
åœ¨çµ„ä»¶ä¸­å¯ä»¥é€é `<NuxtLink>` ä¾†é€£çµåˆ°æŒ‡å®šçš„è·¯ç”±é é¢ï¼Œå®ƒæœƒç”Ÿæˆä¸€å€‹ `<a>` çš„æ¨™ç±¤ä¸”å¸¶æœ‰ `href` å±¬æ€§ã€‚

`<NuxtLink>` æ˜¯åœ¨ **å®¢æˆ¶ç«¯** çš„åŸ·è¡Œçš„ï¼Œ`Nuxt` ç³»çµ±æœƒåœ¨å°èˆªå‰é å…ˆå‹•æ…‹çš„ç”Ÿæˆé é¢ä¾†ä¾›å°èˆªï¼Œé€²è€ŒåŠ å¿«å°èˆªé€Ÿåº¦ã€‚

```vue {5-7}
<template>
  <header>
    <nav>
      <ul>
        <li><NuxtLink to="/about">About</NuxtLink></li>
        <li><NuxtLink to="/posts/1">Post 1</NuxtLink></li>
        <li><NuxtLink to="/posts/2">Post 2</NuxtLink></li>
      </ul>
    </nav>
  </header>
</template>
```

:::tip æé†’
`<NuxtLink>` ç”Ÿæˆ `<a>` å°èˆªçš„æ“ä½œï¼Œä¸¦ä¸æœƒ **åˆ·æ–°é é¢**ï¼Œä½†æœƒå…è¨±å‹•ç•«çš„éæ¸¡ã€‚
:::

## Params åƒæ•¸

å‡è¨­åœ¨ `<script setup>` æƒ…å¢ƒä¸‹ï¼Œä½¿ç”¨ `useRoute()` å¯ä»¥å–å¾—ç•¶å‰è·¯ç”±é é¢è³‡æ–™ ( vue2 æ–¹æ³•: `this.$route` )ã€‚

```vue
<script setup>
  const $route = useRoute()

  // route `/post/1`
  console.log($route.params.id) // 1
</script>
```

## Middleware ä¸­é–“ä»¶
å¯ä»¥è‡ªå®šç¾©è¦åŸ·è¡Œçš„ã€Œä¸­é–“ä»¶ã€å‡½å¼ï¼Œå®ƒæœƒåœ¨æŒ‡å®šçš„è·¯ç”±é€²å…¥ä¹‹å‰å…ˆé‹è¡Œï¼Œ**è·¯ç”±ä¸­é–“ä»¶ï¼Œæœ‰ä¸‰ç¨®é¡å‹:**


### 1ï¸âƒ£ åŒ¿åä¸­é–“ä»¶
ç›´æ¥åœ¨ä½¿ç”¨çš„ `page` é é¢ä¸­å®šç¾©èˆ‡ä½¿ç”¨ã€‚

### 2ï¸âƒ£ å‘½åä¸­é–“ä»¶
è¨­ç½®åœ¨ `middleware/` ç›®éŒ„ä¹‹ä¸‹ï¼Œ`page` é é¢ä½¿ç”¨æ™‚æœƒé€éã€ŒéåŒæ­¥ã€è‡ªå‹•åŠ è¼‰ã€‚
:::warning æ³¨æ„
ä¸­é–“ä»¶æª”æ¡ˆå‘½åçš„è¦å‰‡æ˜¯ ã€Œkebab-case çƒ¤è‚‰ä¸²ã€ï¼Œæ‰€ä»¥ `someMiddleware` æœƒè®Šæˆ `some-middleware`
:::

### 3ï¸âƒ£ å…¨åŸŸä¸­é–“ä»¶
æ¯æ¬¡è·¯ç”±è®ŠåŒ–æ™‚éƒ½æœƒåŸ·è¡Œçš„ä¸­é–“ä»¶ï¼Œè¨­ç½®åœ¨ `middleware/` ç›®éŒ„ä¸‹ï¼Œæª”æ¡ˆä»¥ `.global` çµå°¾å‰µå»ºã€‚

### [ğŸ‘‰ Middleware ä¸­é–“ä»¶](/nuxt3/middleware) è©³ç´°

:::tip æé†’
è·¯ç”±ä¸­é–“ä»¶ `middleware` æ˜¯é‹è¡Œåœ¨ `nuxt` çš„ `vue` éƒ¨åˆ†ï¼Œèˆ‡ `æœå‹™ç«¯` çš„ `middleware` é›–ç„¶åç¨±æ˜¯ä¸€æ¨£ï¼Œä½†æ²’æœ‰ä»»ä½•é—œä¿‚ã€‚
:::

## Validation é©—è­‰

## Reference
- [Nuxt3 Routing](https://nuxt.com/docs/getting-started/routing)
- [Nuxt3 middleware](https://nuxt.com/docs/guide/directory-structure/middleware)